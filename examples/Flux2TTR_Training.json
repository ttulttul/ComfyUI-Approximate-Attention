{
  "id": "daac4daa-cdcc-49cd-a269-56119f4d42c5",
  "revision": 0,
  "last_node_id": 19,
  "last_link_id": 31,
  "nodes": [
    {
      "id": 1,
      "type": "LoadPromptListFromJSON",
      "pos": [
        972.9250235770787,
        316.29347829898427
      ],
      "size": [
        275.624609375,
        58
      ],
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "prompts",
          "shape": 6,
          "type": "STRING",
          "links": [
            2
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "LoadPromptListFromJSON"
      },
      "widgets_values": [
        "prompts_long.json"
      ]
    },
    {
      "id": 2,
      "type": "CLIPLoader",
      "pos": [
        980.1752094388453,
        139.61617974619875
      ],
      "size": [
        270,
        106
      ],
      "flags": {},
      "order": 0,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": [
            1,
            3
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "CLIPLoader"
      },
      "widgets_values": [
        "qwen_3_4b.safetensors",
        "flux2",
        "default"
      ]
    },
    {
      "id": 3,
      "type": "CLIPTextEncode",
      "pos": [
        1350.329435235979,
        133.81728425946585
      ],
      "size": [
        400,
        200
      ],
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 1
        },
        {
          "name": "text",
          "type": "STRING",
          "widget": {
            "name": "text"
          },
          "link": 2
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            4,
            10,
            13,
            20
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "\nAn ancient, weathered black rotary telephone lies half-buried in a lush bed of damp moss and decaying autumn leaves on a dark forest floor. Thick emerald vines weave through the circular finger holes of the rotary dial, and a single, tiny white wildflower sprouts directly from the center of the small red button. The coiled black cord is tangled among gnarled, wet tree roots and clusters of bioluminescent mushrooms that emit a faint, ethereal turquoise glow.\nSharp shafts of golden morning light pierce through a dense canopy of towering ferns and ancient trees, creating \"God rays\" that illuminate the dust and mist dancing above the handset. The phoneâ€™s once-glossy surface is now matte and pitted with age, with droplets of dew clinging to the rotary wheel. In the background, the forest is a soft-focus blur of deep greens and earthy browns, suggesting a world where nature has long since reclaimed human technology.\nStyle: Cinematic surrealism with a focus on macro nature textures.\nMood: Eerie, enchanted, and melancholic."
      ]
    },
    {
      "id": 4,
      "type": "CLIPTextEncode",
      "pos": [
        1347.337247735979,
        407.01650300946585
      ],
      "size": [
        400,
        200
      ],
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 3
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            5,
            14,
            21
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        ""
      ]
    },
    {
      "id": 5,
      "type": "UNETLoader",
      "pos": [
        740.6503799632828,
        -237.6707406827789
      ],
      "size": [
        270,
        82
      ],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            6,
            9,
            18
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "UNETLoader"
      },
      "widgets_values": [
        "flux-2-klein-4b.safetensors",
        "default"
      ]
    },
    {
      "id": 6,
      "type": "KSampler",
      "pos": [
        1931.8749455211557,
        329.6485721536679
      ],
      "size": [
        270,
        474
      ],
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 6
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 4
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 5
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 7
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            8,
            28
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "KSampler"
      },
      "widgets_values": [
        442154945901956,
        "fixed",
        4,
        1,
        "euler",
        "simple",
        1
      ]
    },
    {
      "id": 7,
      "type": "EmptyFlux2LatentImage",
      "pos": [
        1571.0722922159237,
        718.58923246426
      ],
      "size": [
        270,
        106
      ],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            7,
            15,
            22
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "EmptyFlux2LatentImage"
      },
      "widgets_values": [
        512,
        512,
        1
      ]
    },
    {
      "id": 8,
      "type": "Flux2TTRTrainer",
      "pos": [
        2347.9830554940236,
        -605.210203781179
      ],
      "size": [
        317.333984375,
        694
      ],
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 9
        },
        {
          "name": "latents",
          "type": "LATENT",
          "link": 8
        },
        {
          "name": "conditioning",
          "type": "CONDITIONING",
          "link": 10
        },
        {
          "name": "training_config",
          "shape": 7,
          "type": "TTR_TRAINING_CONFIG",
          "link": 11
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            12,
            19
          ]
        },
        {
          "name": "loss_value",
          "type": "FLOAT",
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "Flux2TTRTrainer"
      },
      "widgets_values": [
        512,
        false,
        true,
        "ttr.ckpt",
        256,
        256,
        1024,
        128,
        77,
        0.1,
        128,
        8,
        true,
        768,
        1,
        0.12,
        24,
        true,
        -1,
        -1,
        1,
        1,
        -1,
        true,
        ""
      ]
    },
    {
      "id": 9,
      "type": "Flux2TTRTrainingParameters",
      "pos": [
        1732.6558059194674,
        -627.2212848914509
      ],
      "size": [
        312.1015625,
        466
      ],
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "training_config",
          "type": "TTR_TRAINING_CONFIG",
          "links": [
            11,
            27
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "Flux2TTRTrainingParameters"
      },
      "widgets_values": [
        1,
        1,
        0,
        0.05,
        0.0001,
        1,
        5,
        1,
        0.7,
        1,
        0.5,
        0,
        true,
        "kSoa5HMeUXggByM8jFRZ1oNgt",
        "flux2-ttr",
        "ken-simpson",
        "exp15217362712206097371XXXXXXXXXX",
        10
      ]
    },
    {
      "id": 10,
      "type": "KSampler",
      "pos": [
        3090.170858940212,
        -660.8513552548364
      ],
      "size": [
        270,
        474
      ],
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 12
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 13
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 14
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 15
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            16
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "KSampler"
      },
      "widgets_values": [
        321052615798201,
        "randomize",
        4,
        1,
        "euler",
        "simple",
        1
      ]
    },
    {
      "id": 11,
      "type": "VAEDecode",
      "pos": [
        3613.7852572501633,
        -642.761924350689
      ],
      "size": [
        140,
        46
      ],
      "flags": {},
      "order": 14,
      "mode": 0,
      "inputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "link": 16
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 17
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            31
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "VAEDecode"
      }
    },
    {
      "id": 12,
      "type": "VAELoader",
      "pos": [
        1577.5780195653965,
        875.4428176808594
      ],
      "size": [
        270,
        58
      ],
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "VAE",
          "type": "VAE",
          "links": [
            17,
            23,
            30
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "VAELoader"
      },
      "widgets_values": [
        "flux2-vae.safetensors"
      ]
    },
    {
      "id": 13,
      "type": "Flux2TTRControllerTrainer",
      "pos": [
        2831.02632849258,
        234.27099893078662
      ],
      "size": [
        288.3515625,
        370
      ],
      "flags": {},
      "order": 12,
      "mode": 0,
      "inputs": [
        {
          "name": "model_original",
          "type": "MODEL",
          "link": 18
        },
        {
          "name": "model_ttr",
          "type": "MODEL",
          "link": 19
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 20
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 21
        },
        {
          "name": "latent",
          "type": "LATENT",
          "link": 22
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 23
        },
        {
          "name": "training_config",
          "type": "TTR_TRAINING_CONFIG",
          "link": 27
        }
      ],
      "outputs": [
        {
          "name": "IMAGE_ORIGINAL",
          "type": "IMAGE",
          "links": [
            25
          ]
        },
        {
          "name": "IMAGE_PATCHED",
          "type": "IMAGE",
          "links": [
            26
          ]
        },
        {
          "name": "CONTROLLER",
          "type": "TTR_CONTROLLER",
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "Flux2TTRControllerTrainer"
      },
      "widgets_values": [
        4,
        2345234254,
        "fixed",
        1,
        "euler",
        "normal",
        "",
        100,
        1
      ]
    },
    {
      "id": 15,
      "type": "PreviewImage",
      "pos": [
        3320.9633407529286,
        61.47812808631841
      ],
      "size": [
        140,
        26
      ],
      "flags": {},
      "order": 15,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 25
        }
      ],
      "outputs": [],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 16,
      "type": "PreviewImage",
      "pos": [
        3320.0499140439074,
        284.3303646506797
      ],
      "size": [
        140,
        26
      ],
      "flags": {},
      "order": 16,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 26
        }
      ],
      "outputs": [],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 17,
      "type": "VAEDecode",
      "pos": [
        2384.2114150509296,
        363.34476003562713
      ],
      "size": [
        140,
        46
      ],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "link": 28
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 30
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            29
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "VAEDecode"
      }
    },
    {
      "id": 18,
      "type": "PreviewImage",
      "pos": [
        2630.9440884524493,
        379.7625603611734
      ],
      "size": [
        140,
        246
      ],
      "flags": {},
      "order": 13,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 29
        }
      ],
      "outputs": [],
      "properties": {
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": []
    },
    {
      "id": 19,
      "type": "PreviewImage",
      "pos": [
        3954.8685256374138,
        -624.8332451483379
      ],
      "size": [
        414.3943638171322,
        551.0696901069898
      ],
      "flags": {},
      "order": 17,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 31
        }
      ],
      "outputs": [],
      "properties": {
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": []
    }
  ],
  "links": [
    [
      1,
      2,
      0,
      3,
      0,
      "CLIP"
    ],
    [
      2,
      1,
      0,
      3,
      1,
      "STRING"
    ],
    [
      3,
      2,
      0,
      4,
      0,
      "CLIP"
    ],
    [
      4,
      3,
      0,
      6,
      1,
      "CONDITIONING"
    ],
    [
      5,
      4,
      0,
      6,
      2,
      "CONDITIONING"
    ],
    [
      6,
      5,
      0,
      6,
      0,
      "MODEL"
    ],
    [
      7,
      7,
      0,
      6,
      3,
      "LATENT"
    ],
    [
      8,
      6,
      0,
      8,
      1,
      "LATENT"
    ],
    [
      9,
      5,
      0,
      8,
      0,
      "MODEL"
    ],
    [
      10,
      3,
      0,
      8,
      2,
      "CONDITIONING"
    ],
    [
      11,
      9,
      0,
      8,
      3,
      "TTR_TRAINING_CONFIG"
    ],
    [
      12,
      8,
      0,
      10,
      0,
      "MODEL"
    ],
    [
      13,
      3,
      0,
      10,
      1,
      "CONDITIONING"
    ],
    [
      14,
      4,
      0,
      10,
      2,
      "CONDITIONING"
    ],
    [
      15,
      7,
      0,
      10,
      3,
      "LATENT"
    ],
    [
      16,
      10,
      0,
      11,
      0,
      "LATENT"
    ],
    [
      17,
      12,
      0,
      11,
      1,
      "VAE"
    ],
    [
      18,
      5,
      0,
      13,
      0,
      "MODEL"
    ],
    [
      19,
      8,
      0,
      13,
      1,
      "MODEL"
    ],
    [
      20,
      3,
      0,
      13,
      2,
      "CONDITIONING"
    ],
    [
      21,
      4,
      0,
      13,
      3,
      "CONDITIONING"
    ],
    [
      22,
      7,
      0,
      13,
      4,
      "LATENT"
    ],
    [
      23,
      12,
      0,
      13,
      5,
      "VAE"
    ],
    [
      25,
      13,
      0,
      15,
      0,
      "IMAGE"
    ],
    [
      26,
      13,
      1,
      16,
      0,
      "IMAGE"
    ],
    [
      27,
      9,
      0,
      13,
      6,
      "TTR_TRAINING_CONFIG"
    ],
    [
      28,
      6,
      0,
      17,
      0,
      "LATENT"
    ],
    [
      29,
      17,
      0,
      18,
      0,
      "IMAGE"
    ],
    [
      30,
      12,
      0,
      17,
      1,
      "VAE"
    ],
    [
      31,
      11,
      0,
      19,
      0,
      "IMAGE"
    ]
  ],
  "groups": [],
  "config": {},
  "extra": {
    "workflowRendererVersion": "LG",
    "ds": {
      "scale": 0.47138738413267467,
      "offset": [
        0.8434748643117018,
        1007.2398635126242
      ]
    },
    "frontendVersion": "1.37.11"
  },
  "version": 0.4
}